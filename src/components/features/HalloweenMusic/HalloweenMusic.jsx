'use client'

import { useRef, useState, useEffect } from "react";
import styles from "./HalloweenMusic.module.scss";

export default function HalloweenMusic({ children }) {
  const [isPlaying, setIsPlaying] = useState(false);
  const audioRef = useRef();

  useEffect(() => {
    if (audioRef.current) {
      audioRef.current.muted = true;
      audioRef.current
        .play()
        .then(() => {
          console.log("Audio started (muted)");
        })
        .catch(console.error);
    }
  }, []);

  const unmuteMusic = () => {
    if (audioRef.current) {
      audioRef.current.muted = false;
      setIsPlaying(true);
    }
  };

  return (
    <div className={styles.halloween}>
      <audio ref={audioRef} loop volume={0.3}>
        <source src="/music/thirdweb.studio-halloween.mp3" type="audio/mpeg" />
      </audio>
      <button onClick={() => unmuteMusic()} className={styles.halloween__button}>
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M75 70.8334L70.8333 83.3334H29.1667L25 70.8334V58.3334H75V70.8334Z"
            fill="#738394"
          />
          <path
            d="M74.9993 62.5H24.9993C22.7892 62.5 20.6696 61.6221 19.1068 60.0593C17.544 58.4965 16.666 56.3768 16.666 54.1667V50C16.666 48.7284 19.1314 47.105 19.1314 45.8334C19.1314 44.5617 16.666 44.0755 16.666 41.6667V37.5C16.666 29.7646 19.7389 22.3459 25.2087 16.8761C30.6785 11.4063 38.0972 8.33337 45.8327 8.33337H54.166C61.9015 8.33337 69.3201 11.4063 74.79 16.8761C80.2598 22.3459 83.3327 29.7646 83.3327 37.5V41.6667C83.3327 43.815 80.8673 44.5617 80.8673 45.8334C80.8673 47.105 83.3327 48.1121 83.3327 50V54.1667C83.3327 56.3768 82.4547 58.4965 80.8919 60.0593C79.3291 61.6221 77.2095 62.5 74.9993 62.5Z"
            fill="#D9E3E6"
          />
          <path
            d="M58.3333 75H41.6667C40.5616 75 39.5018 74.561 38.7204 73.7796C37.939 72.9982 37.5 71.9384 37.5 70.8334V58.3334C40.625 58.3334 40.8817 55.5167 45.1529 49.7109C46.5288 48.6104 48.2382 48.0109 50 48.0109C51.7618 48.0109 53.4712 48.6104 54.8471 49.7109C59.1179 55.5163 59.375 58.3334 62.5 58.3334V70.8334C62.5 71.9384 62.061 72.9982 61.2796 73.7796C60.4982 74.561 59.4384 75 58.3333 75Z"
            fill="#D9E3E6"
          />
          <path
            d="M68.75 66.6666V73.2637C68.75 75.4738 67.872 77.5935 66.3092 79.1563C64.7464 80.7191 62.6268 81.597 60.4167 81.597H39.5833C37.3732 81.597 35.2536 80.7191 33.6908 79.1563C32.128 77.5935 31.25 75.4738 31.25 73.2637V66.6666H25V78.0233C24.9999 79.3444 25.314 80.6465 25.9162 81.8223C26.5185 82.9981 27.3917 84.0139 28.4637 84.7858L41.6667 94.2937L44.1667 93.0437C45.9778 92.138 47.975 91.6665 50 91.6665C52.025 91.6665 54.0222 92.138 55.8333 93.0437L58.3333 94.2937L71.5362 84.7858C72.6083 84.0139 73.4815 82.9981 74.0838 81.8223C74.686 80.6465 75.0001 79.3444 75 78.0233V66.6666H68.75Z"
            fill="#D9E3E6"
          />
          <path
            d="M44.8737 61.062C45.6538 58.8741 46.7093 56.7945 48.0149 54.8733C48.214 54.5458 48.494 54.2751 48.828 54.0873C49.1621 53.8995 49.5388 53.8008 49.922 53.8008C50.3052 53.8008 50.682 53.8995 51.016 54.0873C51.35 54.2751 51.6301 54.5458 51.8291 54.8733C53.1364 56.7938 54.1927 58.8736 54.9724 61.062C55.063 61.3957 55.0748 61.7458 55.007 62.0847C54.9391 62.4237 54.7934 62.7423 54.5814 63.0153C54.3694 63.2884 54.0968 63.5084 53.7852 63.6581C53.4736 63.8078 53.1314 63.883 52.7858 63.8779C50.6012 63.8779 51.1237 61.3433 49.9995 61.3629C48.8183 61.385 49.1783 63.8779 47.0583 63.8779C46.7126 63.8832 46.3704 63.8081 46.0588 63.6585C45.7472 63.5088 45.4747 63.2887 45.2627 63.0156C45.0508 62.7424 44.9054 62.4237 44.8378 62.0847C44.7703 61.7456 44.7826 61.3955 44.8737 61.062Z"
            fill="#738394"
          />
          <path
            d="M75.0991 50.7479C74.1478 52.7662 71.1112 53.1975 66.572 53.3529C62.2941 53.4962 59.0503 55.0029 57.0195 46.1687C56.3891 43.8987 60.7766 42.2087 65.8537 40.0762C77.067 35.3667 77.4295 47.9967 75.0991 50.7479Z"
            fill="#738394"
          />
          <path
            d="M24.7773 50.7479C25.729 52.7662 28.7648 53.1975 33.3044 53.3529C37.5819 53.4962 40.826 55.0029 42.8569 46.1687C43.4873 43.8987 39.0998 42.2087 34.0227 40.0762C22.809 35.3667 22.4465 47.9967 24.7773 50.7479Z"
            fill="#738394"
          />
          <path
            d="M47.9167 70.8334H43.75V85.4167H47.9167V70.8334Z"
            fill="#738394"
          />
          <path
            d="M56.2507 70.8334H52.084V85.4167H56.2507V70.8334Z"
            fill="#738394"
          />
        </svg>
      </button>
    </div>
  );
}
