"use client";

import TopImg from "./TopImg";
import React, { useRef, useEffect } from "react";
import styles from "./Top.module.scss";
import TopScrollDown from "./TopScrollDown";
import TopTitle from "./TopTitle";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap";

export default function Top({ children }) {
  const halloweenSvgRef = useRef();

  useEffect(() => {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: halloweenSvgRef.current,
        start: "top bottom",
        end: "bottom top",
        scrub: true,
      },
    });
    tl.to(halloweenSvgRef.current, { xPercent: -100, ease: "none" }, 0);

    return () => tl.revert();
  }, []);

  return (
    <section className={styles.top}>
      <TopTitle />
      <TopScrollDown />
      <TopImg />
      <div ref={halloweenSvgRef} className={styles.top__halloween}>
        <svg
          width="563"
          height="563"
          viewBox="0 0 563 563"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            className={styles["top__halloween-path"]}
            fillRule="evenodd"
            clipRule="evenodd"
            d="M316.29 108.847C313.931 112.781 311.861 116.881 310.097 121.115C322.576 124.493 334.329 130.03 345.12 137.255C367.288 122.804 392.928 115.438 419.647 120.13C458.893 127.05 486.855 157.452 502.385 194.493C518.008 231.815 522.653 278.943 514.114 327.361C505.575 375.779 485.096 418.473 457.65 448.171C430.391 477.682 393.702 496.683 354.48 489.763C345.807 488.229 337.395 485.473 329.497 481.576C314.532 488.82 298.127 492.597 281.501 492.625C264.47 492.625 248.307 488.637 233.529 481.6C225.621 485.49 217.202 488.239 208.522 489.763C169.3 496.683 132.611 477.682 105.352 448.195C77.906 418.473 57.4035 375.779 48.8881 327.385C40.3493 278.943 44.994 231.815 60.6173 194.517C76.1467 157.452 104.109 127.05 143.355 120.154C170.074 115.438 195.714 122.804 217.882 137.278C230.964 128.391 245.711 122.246 261.233 119.215C264.47 107.252 269.866 95.0063 276.059 84.7081C281.266 75.9816 287.905 67.2316 295.834 60.3349C303.528 53.6727 314.671 46.9167 328.418 46.9167C334.639 46.7954 340.654 49.1505 345.139 53.464C349.624 57.7775 352.212 63.6961 352.333 69.9176C352.455 76.1391 350.1 82.154 345.786 86.6391C341.473 91.1242 335.554 93.712 329.332 93.8334C323.585 96.6484 319.41 103.615 316.29 108.847ZM199.397 295.528C194.009 298.639 187.606 299.482 181.597 297.872C175.587 296.261 170.464 292.33 167.353 286.942L143.894 246.313C141.573 242.294 140.497 237.678 140.8 233.047C141.103 228.417 142.773 223.98 145.598 220.299C148.423 216.617 152.276 213.857 156.671 212.366C161.065 210.875 165.803 210.721 170.285 211.923L234.373 229.094C238.855 230.295 242.879 232.798 245.938 236.287C248.997 239.776 250.953 244.093 251.558 248.693C252.163 253.293 251.391 257.97 249.338 262.131C247.285 266.292 244.045 269.75 240.027 272.07L199.397 295.528ZM395.649 286.942C392.538 292.33 387.415 296.261 381.405 297.872C375.396 299.482 368.993 298.639 363.605 295.528L322.975 272.07C318.957 269.75 315.716 266.292 313.664 262.131C311.611 257.97 310.839 253.293 311.444 248.693C312.049 244.093 314.005 239.776 317.063 236.287C320.122 232.798 324.147 230.295 328.629 229.094L392.717 211.923C397.199 210.721 401.937 210.875 406.331 212.366C410.725 213.857 414.579 216.617 417.404 220.299C420.229 223.98 421.899 228.417 422.202 233.047C422.505 237.678 421.428 242.294 419.107 246.313L395.649 286.942ZM224.005 373.269C226.331 375.012 229.208 375.858 232.108 375.651C235.008 375.445 237.736 374.199 239.792 372.143C250.856 361.084 265.858 354.872 281.501 354.872C297.144 354.872 312.146 361.084 323.21 372.143C325.265 374.199 327.994 375.445 330.893 375.651C333.793 375.858 336.671 375.012 338.997 373.269L361.283 356.567C366.26 352.834 372.516 351.231 378.675 352.111C384.834 352.991 390.391 356.281 394.124 361.258C397.857 366.236 399.46 372.492 398.58 378.651C397.7 384.81 394.41 390.367 389.433 394.1L367.147 410.802C355.786 419.32 341.733 423.454 327.569 422.445C313.405 421.437 300.08 415.354 290.04 405.313C287.774 403.05 284.703 401.778 281.501 401.778C278.299 401.778 275.227 403.05 272.962 405.313C262.922 415.354 249.597 421.437 235.433 422.445C221.269 423.454 207.216 419.32 195.855 410.802L173.593 394.1C171.128 392.252 169.052 389.936 167.482 387.285C165.913 384.634 164.881 381.701 164.445 378.651C164.009 375.601 164.179 372.496 164.943 369.511C165.708 366.527 167.053 363.723 168.901 361.258C170.749 358.794 173.065 356.718 175.716 355.148C178.366 353.579 181.3 352.546 184.35 352.111C187.4 351.675 190.505 351.844 193.489 352.609C196.474 353.374 199.278 354.718 201.743 356.567L224.005 373.269Z"
            fill="#F9A646"
            fillOpacity="0.6"
          />
        </svg>
      </div>

      {/* <TopClientTitle /> */}
    </section>
  );
}
